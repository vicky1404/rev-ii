<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
	
	<h:form id="fGD">
	
                <h:outputText value="#{msg.generador_titulo_disenador}" id="ot1" disabled="true"/>
                <div align="center">
                    <p:dataTable value="#{generadorVersionBackingBean.estructuraList}"
                              id="t90" style="width:517px" var="row"
                              binding="#{generadorDisenoBackingBean.disenoEstructuraTable}"
                              emptyMessage="#{msg.general_sin_informacion}">
                        <p:column sortable="false" headerText="#{msg.generador_numero_estructura}" align="center" id="c223" width="150" >
                            <h:outputText value="#{row.orden}" id="ot2"/>
                        </p:column>
                        <p:column sortable="false" headerText="#{msg.generador_tipo_estructura}" align="center" id="c222" width="200" >
                            <h:outputText value="#{row.tipoEstructura.nombre}" id="ot3"/>
                        </p:column>
                        <p:column sortable="false" headerText="#{msg.generador_editar_grilla}" align="center" id="c233" width="150" >
                            <p:commandLink text="Editar" id="cl1"
                                                    action="#{generadorDisenoBackingBean.editarGrillaAction}"
                                                    rendered="#{generadorVersionBackingBean.almacenado and row.tipoEstructura.idTipoEstructura == 0 }"/>
                            
                            <p:commandLink text="Editar" id="cl2"
                                                    action="#{generadorDisenoBackingBean.editarTextoAction}"
                                                    rendered="#{generadorVersionBackingBean.almacenado and row.tipoEstructura.idTipoEstructura == 2}"/>
                                                    
                            <p:commandLink text="Editar" id="cl3"
                                                    action="#{generadorDisenoBackingBean.editarHtmlAction}"
                                                    rendered="#{generadorVersionBackingBean.almacenado and row.tipoEstructura.idTipoEstructura == 1}"/>
                                                                            
                        </p:column>
                    </p:dataTable>
                    <p:spacer height="20" id="s2"/>
                     
                    <!-- RENDERED  af:group rendered="#{generadorDisenoBackingBean.renderedEditarGrilla}" id="g1">-->
					
					<p:spacer height="20" id="s7"/>                        

					<h:outputLabel value="Diseño de Grilla" id="ol1"/>                        
                                    
                                    
                    <div align="center">
                    
                    <p:dataTable value="#{generadorDisenoBackingBean.columnasAgregadasSelected}"
                              id="t1" var="row" binding="#{generadorDisenoBackingBean.agregarColumnaTable}"
                              style="width:540px"
                              emptyMessage="#{msg.general_sin_informacion}">
                        
                        <p:column sortable="false" headerText="#{msg.generador_titulo_columna}" id="c323" width="200">
                            <p:inputText value="#{row.tituloColumna}" id="it1"/>
                        </p:column>
                        
                        <p:column sortable="false" headerText="#{msg.generador_ancho_columna}"
                                   align="center" id="c333" width="100"
                                   inlineStyle="height:50px;">
                            <p:inputText value="#{row.ancho}" id="it2"/>
                        </p:column>
                        
                        <p:column sortable="false" headerText="#{msg.generador_columna_row_header}"
                                   align="center" id="c344" width="120"
                                   inlineStyle="height:50px;">
                            <!-- p:selectOneMenu label="#{msg.generador_columna_cabecera}" value="#{row.rowHeader}" id="soc3">
                                <f:selectItem label="Sí" value="true" id="si4"/>
                                <f:selectItem label="No" value="false" id="si3"/>
                            </p:selectOneMenu> -->
                        </p:column>
                        <p:column sortable="false" headerText="A" align="center" id="c345" width="30">
                            <p:commandLink id="cl4" action="#{generadorDisenoBackingBean.agregarColumnaAction}" rendered="#{generadorVersionBackingBean.renderBotonEditar}">
                                <p:graphicImage value="../../resources/images/icon/add.png" title="#{msg.generador_agregar_columna}" />
                            </p:commandLink>
                        </p:column>
                        <p:column sortable="false" headerText="E" align="center" id="c1" width="30">
                            <p:commandLink id="cl6" action="#{generadorDisenoBackingBean.editarColumnaAction}" rendered="#{generadorVersionBackingBean.renderBotonEditar}">
                                <p:graphicImage value="../../resources/images/icon/add.png" title="#{msg.generador_agregar_columna}" />
                            </p:commandLink>
                        </p:column>
                        <p:column sortable="false" headerText="B" align="center" id="c2" width="30">
                            <p:commandLink id="cl5" action="#{generadorDisenoBackingBean.eliminarColumnaAction}" rendered="#{generadorVersionBackingBean.renderBotonEditar}">
                                <p:graphicImage value="../../resources/images/icon/add.png" title="#{msg.generador_agregar_columna}" />
                            </p:commandLink>
                        </p:column>
                    </p:dataTable>
                    <p:spacer height="20" id="s5"/>
                     
                        <!-- RENDERED  af:panelGroupLayout layout="horizontal" id="pgl3" rendered="#{generadorVersionBackingBean.renderBotonEditar}">-->
                            <p:fileUpload label="Archivo:" id="if1" autoSubmit="false" required="false"
                                          value="#{generadorDisenoBackingBean.uploadedFile}"
                                          shortDesc="#{msg.tooltip_carga_archivo_excel_grilla}"
                                          validator="#{generadorDisenoBackingBean.archivoEstructuraValidator}"></p:fileUpload>
                            <p:spacer width="10" id="s3"/>
                            <p:commandButton text="Cargar Archivo" id="cb1"  action="#{generadorDisenoBackingBean.procesarArchivo}" icon="/images/icon/drive-upload.png"/>
                     
                    <p:spacer height="25" id="s6"/>
                     
                    <!--af:group rendered="#{generadorDisenoBackingBean.renderdEditarGrillaTable}" id="g2" -->
                        <table>
                            <tr>
                                <td>
                                    <p:inputText label="#{msg.generador_titulo}" value="#{generadorDisenoBackingBean.tituloGrilla}" id="it4"/>
                                </td>
                                <td>
                                    <p:commandButton icon="/images/icon/save2.png" actionListener="#{generadorDisenoBackingBean.guardarGrilaListener}" id="cl7" text="Guardar Grilla"/>
                                </td>
                            </tr>
                        </table>
                        
                        <p:spacer width="10" height="10" id="s04"/>
                        
                        
                        <p:dataTable binding="#{generadorDisenoBackingBean.editarGrillaTable}"
                                      id="tblD01" emptyMessage="#{msg.generador_sin_contenido}"
                                      var="row" rendered="true"  >
						</p:dataTable>
                        
                        <p:spacer height="20" id="s4"/>
                        
                        <table id="tbFooter1">
                            <tr>
                                <td>
                                    <p:commandLink text="#{msg.generador_agregar_fila}"
                                                    partialSubmit="true" id="cl113"
                                                    action="#{generadorDisenoBackingBean.agregarFilaAction}"></p:commandLink>
                                </td>
                                <td>-</td>
                                <td>
                                    <p:commandLink text="#{msg.generador_eliminar_fila}"
                                                    partialSubmit="true" id="cl114"
                                                    action="#{generadorDisenoBackingBean.eliminarFilaAction}"></p:commandLink>
                                </td>
                                <td>-</td>
                                <td>
                                    <p:selectOneMenu label="#{msg.generador_seleccione_fila}"
                                                        id="soc7"
                                                        value="#{generadorDisenoBackingBean.filaSelected}"
                                                        update="::t90:cl1 cl113 cl114  ::t1:cl4"
                                                        valueChangeListener="#{generadorDisenoBackingBean.selectFilaChangeListener}"
                                                        autoSubmit="true"
                                                        binding="#{generadorDisenoBackingBean.agregarFilaChoice}">
                                        
                                        <f:selectItem itemLabel="#{msg.general_control_seleccione}" noSelectionOption="true" />
                                        <f:selectItems value="#{generadorDisenoBackingBean.filasAgregadas}" id="si7"/>
                                        
                                    </p:selectOneMenu>
                                </td>
                                <td>
                                    <p:selectOneMenu label="#{msg.generador_tipo_columna}"
                                                        id="soc9"
                                                        value="#{generadorDisenoBackingBean.tipoCeldaSelected}"
                                                        update="cl113">
                                        <f:selectItem itemLabel="#{msg.general_control_seleccione}" noSelectionOption="true" />
                                        <f:selectItems value="#{generadorDisenoBackingBean.componenteBackingBean.tipoCeldas}" id="si9"/>
                                    </p:selectOneMenu>
                                </td>
                                <td>
                                    <p:selectOneMenu label="Tipo Dato" id="soc8"
                                                        value="#{generadorDisenoBackingBean.tipoDatoSelected}"
                                                        update="cl113">
                                                        
                                        <f:selectItem itemLabel="#{msg.general_control_seleccione}" noSelectionOption="true" />                
                                        <f:selectItems value="#{generadorDisenoBackingBean.componenteBackingBean.tipoDatos}" id="si8"/>
                                    </p:selectOneMenu>
                                </td>
                            </tr>
                        </table>
                                    <h:outputLabel value="Editor de Propiedades de Celdas" id="ol2"/>
                                    <p:spacer height="20" id="s9"/>
                                    <div align="center">
                                    
                                            <c:forEach  items="#{generadorDisenoBackingBean.campoEdicionGrillas}" var="itemColumna">
                                                <c:if test="#{itemColumna.tipo == 1}">
                                                    <p:dataTable width="#{generadorDisenoBackingBean.widthEditarGrillaTable + 10}"
                                                              value="#{generadorDisenoBackingBean.unRegistroList}"
                                                              var="row" inlineStyle="height:auto;"
                                                              update="::soc7 ::cl113"
                                                              binding="#{generadorDisenoBackingBean.editorTable1}"
                                                              emptyText="#{msg.general_sin_informacion}">
                                                        <c:forEach items="#{itemColumna.columnas}"
                                                                    var="subItemColumna"
                                                                    varStatus="status1">
                                                            <p:column headerText="#{subItemColumna.titulo}"
                                                                       width="#{subItemColumna.ancho}"
                                                                       id="idC1_#{status1.count}">
                                                                <p:inputText value="#{subItemColumna.valor}"
                                                                              label="Valor de Celda"
                                                                              id="it1_#{status1.count}"/>
                                                            </p:column>
                                                        </c:forEach>
                                                    </p:dataTable>
                                                </c:if>
                                                <c:if test="#{itemColumna.tipo == 2}">
                                                    <p:dataTable width="#{generadorDisenoBackingBean.widthEditarGrillaTable + 10}"
                                                              value="#{generadorDisenoBackingBean.unRegistroList}"
                                                              var="row"
                                                              update="::soc7"
                                                              binding="#{generadorDisenoBackingBean.editorTable2}"
                                                              emptyMessage="#{msg.general_sin_informacion}">
                                                        <c:forEach items="#{itemColumna.columnas}"
                                                                    var="subItemColumna"
                                                                    varStatus="status2">
                                                            <p:column headerText="Tipo Celda" width="#{subItemColumna.ancho}" id="idC2_#{status2.count}">
                                                                <p:selectOneMenu value="#{subItemColumna.valor}" id="soc2_#{status2.count}">
                                                                	<f:selectItem itemLabel="#{msg.general_control_seleccione}" noSelectionOption="true" />
                                                                    <f:selectItems value="#{generadorDisenoBackingBean.componenteBackingBean.tipoCeldas}" id="si1"/>
                                                                </p:selectOneMenu>
                                                            </p:column>
                                                        </c:forEach>
                                                    </p:dataTable>
                                                </c:if>
                                                <c:if test="#{itemColumna.tipo == 3}">
                                                    <p:dataTable width="#{generadorDisenoBackingBean.widthEditarGrillaTable + 10}"
                                                              value="#{generadorDisenoBackingBean.unRegistroList}"
                                                              var="row"
                                                              update="::soc7"
                                                              binding="#{generadorDisenoBackingBean.editorTable3}"
                                                              emptyMessage="#{msg.general_sin_informacion}">
                                                        <c:forEach items="#{itemColumna.columnas}"
                                                                    var="subItemColumna"
                                                                    varStatus="status3">
                                                            <p:column headerText="Tipo Dato"
                                                                       width="#{subItemColumna.ancho}"
                                                                       inlineStyle="height:auto;"
                                                                       id="idC3_#{status3.count}">
                                                                <p:selectOneMenu value="#{subItemColumna.valor}" id="soc3_#{status3.count}">
                                                                	<f:selectItem itemLabel="#{msg.general_control_seleccione}" noSelectionOption="true" />
                                                                    <f:selectItems value="#{generadorDisenoBackingBean.componenteBackingBean.tipoDatos}" id="si2"/>
                                                                </p:selectOneMenu>
                                                            </p:column>
                                                        </c:forEach>
                                                    </p:dataTable>
                                                </c:if>
                                            </c:forEach>
                                            
                                            <p:spacer height="20" id="sp3"/>
                                            
                                            <p:commandButton text="Guardar Propiedades de Celda" icon="/images/icon/save2.png" actionListener="#{generadorDisenoBackingBean.guardarEdicionCeldaByFilaAction}" partialSubmit="true" id="cb5"/>
                                            
                                            <p:spacer height="10" id="sp4"/>
                                        
                                    </div>
                     
                    <p:spacer width="10" height="20" id="s05"/>
                     
                     <p:fieldset legend="#{msg.general_ayuda}" toggleable="true" toggleSpeed="500" rendered="#{generadorDisenoBackingBean.renderedEditarGrilla}">   
                        <div align="left">
                            <h:panelGrid columns="1" cellpadding="10">  
                                <h:outputText id="ota1" value="#{msg.generador_ayuda_agregar_columna}"/>
                                <h:outputText id="ota2" value="#{msg.generador_ayuda_editar_columna}"/>
                                <h:outputText id="ota3" value="#{msg.generador_ayuda_eliminar_columna}"/>
                                <h:outputText id="ota4" value="#{msg.generador_ayuda_agregar}"/>
                                <h:outputText id="ota5" value="#{msg.generador_ayuda_eliminar}"/>
                                <h:outputText id="ota6" value="#{msg.generador_ayuda_tipo_dato}"/>
                                <h:outputText id="ota7" value="#{msg.generador_ayuda_tipo_columna}"/>
                                <h:outputText id="ota8" value="#{msg.generador_ayuda_titulo}"/>
                            </h:panelGrid>
                        </div>
                    </p:fieldset>
                </div>
 
 <h:panelGrid columns="1" rendered="#{generadorDisenoBackingBean.renderedTextArea}" id="g4">
 
    <p:spacer width="10" height="30" id="sta1"/>
        <table>
            <tr>
                <h:outputText value="Titulo" id="ot4"/>
            </tr>
             
            <tr>
                <td>
                    <p:inputText label=" " id="it5" value="#{generadorDisenoBackingBean.tituloTexto}" columns="150" maxlength="2048"/>
                </td>
            </tr>
             
            <tr>
                <td>
                    <p:selectBooleanCheckbox text="Sí" label="Aplicar Negria" id="sbc1" value="#{generadorDisenoBackingBean.negrita}"/>
                </td>
            </tr>
             
            <tr>
                <td align="right" colspan="2">
                    <p:commandButton text="Guardar" icon="/images/icon/save.png" actionListener="#{generadorDisenoBackingBean.guardarTextoListener}" id="cb4"/>
                </td>
            </tr>
        </table>
</h:panelGrid>
 
 <h:panelGrid rendered="#{generadorDisenoBackingBean.renderedTextHtml}" id="g5">
    
    <p:spacer width="10" height="30" id="sta2"/>

        <table>
            <tr>
                <h:outputText value="Titulo" id="ot5"/>
            </tr>
             
            <tr>
                <td>
                    <h:inputTextarea id="it6" value="#{generadorDisenoBackingBean.tituloHtml}" style="width:517px; height:40px;"/>
                </td>
            </tr>
             
            <tr>
                <td align="right" colspan="2">
                    <p:commandButton text="Guardar" icon="/images/icon/save.png" actionListener="#{generadorDisenoBackingBean.guardarTextoHtmlListener}" id="cb05"/>
                </td>
            </tr>
        </table>
	</h:panelGrid>
	</div>
	</h:form>

</ui:composition>