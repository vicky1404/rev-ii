<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	content='text/html; charset=ISO-8859-1' http-equiv='Content-Type'>
		<h:form id="fGV">
		
		<!--  p:panel header="Seleccion de Tipo de Cuadro y Cuadro" style="width:400px;align:center"-->  
			<h:panelGrid columns="4" style="margin-bottom:10px" cellpadding="5" >  
				
				<p:selectOneMenu value="#{generadorVersionBackingBean.tipoCuadro}" effect="fade" label="Tipo de Cuadro" onchange="submit()">
					<f:selectItem  itemLabel="Seleccione"/>
	            	<f:selectItems value="#{generadorVersionBackingBean.componenteBackingBean.tipoCuadroItems}" id="si1"/>
	            	<p:ajax listener="#{generadorVersionBackingBean.tipoCatalogoChange}" />
	        	</p:selectOneMenu> 
	        	
	        	<!--  p:ajax  event="change" update="@form" /-->
	        	
	        	<p:autoComplete value="#{generadorVersionBackingBean.idCatalogo}" id="ac1" completeMethod="#{generadorVersionBackingBean.completeCatalogo}"  var="c" itemLabel="#{c.nombre}" itemValue="#{c.idCatalogo}" dropdown="true" scrollHeight="300"/>
				
				<p:commandButton value="Buscar" actionListener="#{generadorVersionBackingBean.buscarListener}" update="dt1,dt2"/>
	        
	        </h:panelGrid>
	        
	        <p:spacer height="20px;"/>
	        
	        <p:dataTable id="dt1" var="var" value="#{generadorVersionBackingBean.catalogo}">
	        
	        	<p:column id="c1" headerText="Codigo Cuadro">
	        		<h:outputText value="#{var.codigoCuadro}" />
	        	</p:column>
	        	
	        	<p:column id="c2" headerText="Codigo Sub Cuadro">
	        		<h:outputText value="#{var.codigoSubcuadro}" />
	        	</p:column>
	        	
	        	<p:column id="c3" headerText="Nombre Cuadro">
	        		<h:outputText value="#{var.nombre}" />
	        	</p:column>
	        	
	        	<p:column id="c4" headerText="Titulo Cuadro">
	        		<h:outputText value="#{var.titulo}" />
	        	</p:column>
	        	
	        	<p:column id="c5" headerText="Vigente">
	        		<h:outputText value="#{var.vigencia}" />
	        	</p:column>
	        	
	        </p:dataTable>
	        
	        <p:spacer height="20px;"/>
	        
	        <p:dataTable id="dt2" var="ver" value="#{generadorVersionBackingBean.versionList}">
	        
	        	<p:column id="c1" headerText="Version">
            		<h:outputText value="#{ver.version}" />  
        		</p:column>
        		
        		<p:column id="c2" headerText="Vigencia">
            		<h:outputText value="#{ver.vigencia}" />  
        		</p:column>
        		
        		<p:column id="c3" headerText="Comentario Creacion">
            		<h:outputText value="#{ver.comentario}" />  
        		</p:column>
        		
        		<p:column id="c4" headerText="Fecha Creacion">
            		<h:outputText value="#{ver.fechaCreacion}" />  
        		</p:column>
        		
	        </p:dataTable>
	        
	        <p:dataTable id="dt3" value="#{generadorVersionBackingBean.estructuraList}" var="row">
	        	
	        	<p:column headerText="Orden">
	        		<h:outputText value="#{row.orden}" />
	        	</p:column>
				
				<p:column headerText="Tipo de Estructura">
			        <p:selectOneMenu value="#{row.tipoEstructura}"> 
			        	<f:selectItem  itemLabel="Seleccione" />
			        	<f:selectItems value="#{generadorVersionBackingBean.componenteBackingBean.tipoEstructuras}" />
			        </p:selectOneMenu>
	        	</p:column>
	        	
	        	<p:column headerText="Agregar o Eliminar">
	        		<p:commandLink >
	        			<p:graphicImage value="../../resources/images/icon/up_ok.png" />  
	        		</p:commandLink>
	        		<p:commandLink rendered="#{generadorVersionBackingBean.sizeEstructrua > 1 ? true : false}">
	        			<p:graphicImage value="../../resources/images/icon/down_ok.png" />  
	        		</p:commandLink>
	        	</p:column>
	        	
	        </p:dataTable>
	       
	        
		<div align="center"></div>
		</h:form>
</ui:composition>