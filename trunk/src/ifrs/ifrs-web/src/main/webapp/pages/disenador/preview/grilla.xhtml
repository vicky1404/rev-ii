<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

	<p:spacer height="20"/>
	<h:outputText value="#{item.grillaVO.titulo}"/>
	<p:spacer height="20"/>
	<br />
	<div class="ui-datatable ui-widget ui-datatable-resizable" >
		<table role="grid">
			<thead>
				<h:panelGroup rendered="#{item.grillaVO.agrupaciones != null}">
					<ui:repeat var="agr" value="#{item.grillaVO.agrupaciones}">
						<tr>
							<ui:repeat var="agrN" value="#{agr}">
								<th class="ui-state-default ui-resizable-column"
									role="columnheader" colspan="#{agrN.colSpan + 1}">
									<div class="ui-dt-c">
										<span><h:outputText
												value="#{agrN.titulo == null ? ' ' : agrN.titulo}" /></span>
									</div>
								</th>
							</ui:repeat>
						</tr>
					</ui:repeat>
				</h:panelGroup>
				<tr role="row">
					<ui:repeat var="col" value="#{item.grillaVO.columnas}">
						<th class="ui-state-default ui-resizable-column"
							role="columnheader">
							<div class="ui-dt-c" style="width:#{col.ancho}px">
								<span><h:outputText value="#{col.tituloColumna}" /></span>
							</div>
						</th>
					</ui:repeat>
				</tr>
			</thead>
			<tbody class="ui-datatable-data ui-widget-content">
				<ui:repeat var="col" value="#{item.grillaVO.celdaList}"
					varStatus="status">
					<tr class="ui-widget-content ui-datatable-even" role="row"
						data-ri="1">
						<ui:repeat var="row" value="#{col}">
							<td role="gridcell">
								<div class="ui-dt-c">
									<div style="padding-left: 5px"> 
									    
									    <h:outputText
											value="#{row.valor}" id="ot7"
											style="#{row.tipoCelda.idTipoCelda == 4 or row.tipoCelda.idTipoCelda == 5 ? 'text-align:right;font-weight:bold;color:black' : 'text-align:right;'}"
											rendered="#{ (row.tipoCelda.idTipoCelda == 0 or row.tipoCelda.idTipoCelda == 4 or row.tipoCelda.idTipoCelda == 5) and (row.tipoDato.idTipoDato != 2 and row.tipoDato.idTipoDato != 3) }"></h:outputText>
										<h:outputText value="#{row.valor}" id="ot8"
											inlineStyle="font-weight:bold; text-align:left;"
											rendered="#{row.tipoCelda.idTipoCelda == 2}"></h:outputText>
										<p:inputText value="#{row.valor}" id="it7"
											style="text-align:left;"
											rendered="#{row.tipoCelda.idTipoCelda == 6 and row.tipoDato.idTipoDato == 0}"
											maximumLength="#{msg.constantes_max_caracter_cuadro}">
											<f:validateLength
												maximum="#{msg.constantes_max_caracter_cuadro}" />
										</p:inputText> <p:inputText value="#{row.valorLong}" id="it8"
											rendered="#{( row.tipoDato.idTipoDato == 2 and (row.tipoCelda.idTipoCelda != 4 and row.tipoCelda.idTipoCelda != 5))}"
											style="text-align:right;"
											maxlength="#{msg.constantes_text_length_long}">

											<f:convertNumber integerOnly="true" type="number"
												maxFractionDigits="0" groupingUsed="true"
												locale="#{configuradorDisenoBackingBean.localeCL}"
												maxIntegerDigits="#{msg.constantes_max_lenght_number}"
												pattern="##,###,###,###" />
											<f:validateLongRange
												maximum="#{msg.constantes_maximum_validate_long_range}" />
										</p:inputText> <h:outputText value="#{row.valorLong}" id="it28"
											rendered="#{row.tipoDato.idTipoDato == 2 and (row.tipoCelda.idTipoCelda == 4 or row.tipoCelda.idTipoCelda == 5)}"
											style="text-align:right;border:none;background-color: white;font-weight:bold;color:black"
											maxlength="#{msg.constantes_text_length_long}">

											<f:convertNumber integerOnly="true" type="number"
												maxFractionDigits="0" groupingUsed="true"
												locale="#{configuradorDisenoBackingBean.localeCL}"
												maxIntegerDigits="#{msg.constantes_max_lenght_number}"
												pattern="##,###,###,###" />


										</h:outputText> <p:inputText value="#{row.valorBigDecimal}" id="it9"
											rendered="#{row.tipoDato.idTipoDato == 3 and (row.tipoCelda.idTipoCelda != 4 and row.tipoCelda.idTipoCelda != 5)}"
											maximumLength="#{msg.constantes_text_length_decimal}"
											disabled="#{row.tipoCelda.idTipoCelda == 4 or row.tipoCelda.idTipoCelda == 5}"
											style="">

											<f:convertNumber integerOnly="false" type="number"
												maxIntegerDigits="#{msg.constantes_max_lenght_number}"
												maxFractionDigits="4"
												locale="#{configuradorDisenoBackingBean.localeCL}"
												pattern="##,###,###,###.####" />
											<f:validateDoubleRange
												maximum="#{msg.constantes_maximum_validate_long_range}" />
										</p:inputText> <p:inputText value="#{row.valorBigDecimal}" id="it09"
											rendered="#{row.tipoDato.idTipoDato == 3 and (row.tipoCelda.idTipoCelda == 4 or row.tipoCelda.idTipoCelda == 5)}"
											maximumLength="#{msg.constantes_text_length_decimal}"
											disabled="#{row.tipoCelda.idTipoCelda == 4 or row.tipoCelda.idTipoCelda == 5}"
											style="border:none;background-color: white;font-weight:bold;color:black">

											<f:convertNumber integerOnly="false" type="number"
												maxIntegerDigits="#{msg.constantes_max_lenght_number}"
												maxFractionDigits="4"
												locale="#{configuradorDisenoBackingBean.localeCL}"
												pattern="##,###,###,###.####" />

										</p:inputText> 
										
										<p:calendar value="#{row.valorDate}" id="it10" navigator="true"
											pattern="dd-MM-yyyy" label=" " effect="fade" showOn="button"
											locale="#{configuradorDisenoBackingBean.localeCL}"
											rendered="#{row.tipoDato.idTipoDato == 1 and row.tipoCelda.idTipoCelda == 6}">
										</p:calendar> 
										<div style="display:inline-block">
											<p:panelGrid columns="3" columnClasses="border_none, border_none, border_none"
												rendered="#{row.tipoCelda.idTipoCelda == 3}" style="display: inline;" layout="block">
												<p:commandLink
													actionListener="#{procesoBackingBean.addRowListener}"
													id="cl2" rendered="true" update="@form">
													<p:graphicImage id="gVgi1"
														styleClass="ui-icon ui-icon-circle-plus"
														title="#{msg.general_control_agregarFila}" />
													<f:param name="idFila" value="#{row.idFila}" id="p1" />
													<f:param name="idGrilla" value="#{row.idGrilla}" id="p2" />
												</p:commandLink>
												<p:spacer width="10" id="s1" />
												<p:commandLink
													actionListener="#{procesoBackingBean.deleteRowListener}"
													id="cl3" rendered="true" update="@form">
													<p:graphicImage id="gVgi2"
														styleClass="ui-icon ui-icon-circle-minus"
														title="#{msg.generador_eliminar_fila}" />
													<f:param name="idFila" value="#{row.idFila}" id="p3" />
													<f:param name="idGrilla" value="#{row.idGrilla}" id="p4" />
												</p:commandLink>
											</p:panelGrid>
										</div>
									</div>
								</div>
							</td>
						</ui:repeat>
					</tr>
				</ui:repeat>
			</tbody>
		</table>
	</div>


	<p:spacer height="20px" />


</ui:composition>